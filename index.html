<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Babylon.js - Humanoid Control</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
 
  <canvas id="renderCanvas" style="width: 100%; height: 100%;"></canvas>

  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/babylon.max.js"></script>
  <script>
    window.addEventListener('DOMContentLoaded', function() 
    {
      const canvas = document.getElementById("renderCanvas");
      const engine = new BABYLON.Engine(canvas, true);
      const scene = new BABYLON.Scene(engine);

      // Camera setup
      const camera = new BABYLON.ArcRotateCamera("camera1", Math.PI / 2, Math.PI / 4, 10, BABYLON.Vector3.Zero(), scene);
      camera.attachControl(canvas, true);
      camera.checkCollisions = true;

      // Light setup
      const light = new BABYLON.HemisphericLight("light1", new BABYLON.Vector3(0, 1, 0), scene);
      light.intensity = 0.7;

      // Create floor
      const floor = BABYLON.MeshBuilder.CreateGround("ground", { width: 10, height: 10 }, scene);
      floor.checkCollisions = true; // Enable collision on the floor

      // Create the cube with size 1
      var cube = BABYLON.MeshBuilder.CreateBox("cube", { size: 1 }, scene);
      cube.position = new BABYLON.Vector3(0,0, 0);

      // Create material
      var material = new BABYLON.StandardMaterial("boxMaterial", scene);
        material.diffuseColor = new BABYLON.Color3(1, 0, 0); // RGB values (1, 0, 0) for red
        cube.material = material;



      // Keyboard controls for humanoid movement
      let moveForward = false;
      let moveBackward = false;
      let moveLeft = false;
      let moveRight = false;

      const speed = 0.1; // Movement speed

      // Keyboard events
      window.addEventListener("keydown", function(evt) 
      {
        if (evt.key === "w" || evt.key === "ArrowUp") moveForward = true;
        if (evt.key === "s" || evt.key === "ArrowDown") moveBackward = true;
        if (evt.key === "a" || evt.key === "ArrowLeft") moveLeft = true;
        if (evt.key === "d" || evt.key === "ArrowRight") moveRight = true;
      });

      window.addEventListener("keyup", function(evt) 
      {
        if (evt.key === "w" || evt.key === "ArrowUp") moveForward = false;
        if (evt.key === "s" || evt.key === "ArrowDown") moveBackward = false;
        if (evt.key === "a" || evt.key === "ArrowLeft") moveLeft = false;
        if (evt.key === "d" || evt.key === "ArrowRight") moveRight = false;
      });

      scene.onBeforeRenderObservable.add(function() 
      {
        
        if (moveForward) 
        {
            console.log("moveForward");

            cube.position.z -= speed;
        }

        if (moveBackward)
        {
          cube.position.z += speed;
          console.log("moveBackward");
        } 

        if (moveLeft)
        {
          cube.position.x += speed;
          console.log("moveLeft");
         
        } 

        if (moveRight)
        {
          cube.position.x -= speed;
          console.log("moveRight");
        } 
      });
        
      

      // Enable physics and gravity
      const gravityVector = new BABYLON.Vector3(0, -0.5, 0);
      scene.gravity = gravityVector;
      scene.collisionsEnabled = true;

      // Run the render loop
      engine.runRenderLoop(function() 
      {
        scene.render();
      });

      // Resize the engine on window resize
      window.addEventListener('resize', function() 
      {
        engine.resize();
      });
    });
  </script>
</body>
</html>